{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Imports\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\n// DOM Content Loaded Event Listener\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Variables\n  let currentPage = 1;\n  let totalHits = 0;\n  const searchInput = document.querySelector('#searchBar');\n  const searchButton = document.querySelector('button');\n  const gallery = document.querySelector('#gallery');\n  const loader = document.querySelector('.loader');\n  const loaderShowMore = document.querySelector('.loader-showMore');\n  const showMoreButton = document.querySelector('#showMore');\n\n  // Lightbox Setup\n  let lightbox = new SimpleLightbox('.gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionPosition: 'bottom',\n    enableKeyboard: true,\n    showCounter: true,\n    animationSpeed: 250,\n    preloading: true,\n    overlayOpacity: 0.7,\n    className: 'simple-lightbox',\n  });\n\n  lightbox.on('show.simplelightbox', () => {});\n\n  lightbox.on('error.simplelightbox', e => {\n    console.error('Lightbox error:', e);\n  });\n\n  // Toast Function\n  const showIziToast = message => {\n    iziToast.show({\n      message,\n      messageSize: '16px',\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      messageColor: 'white',\n      iconColor: 'white',\n      progressBarColor: 'rgba(181, 27, 27, 1)',\n      close: true,\n      position: 'topRight',\n    });\n  };\n\n  // Helper Functions\n  const createImagePropertyElement = (className, labelText, valueText) => {\n    const li = document.createElement('li');\n    li.className = className;\n\n    const textSpan = document.createElement('span');\n    textSpan.className = `${className}Text`;\n    textSpan.textContent = labelText;\n\n    const valueSpan = document.createElement('span');\n    valueSpan.className = `${className}Value`;\n    valueSpan.textContent = valueText;\n\n    li.appendChild(textSpan);\n    li.appendChild(valueSpan);\n\n    return li;\n  };\n\n  // Main Function\n  const fetchImages = async (page = 1) => {\n    const query = searchInput.value.trim();\n    if (!query) return;\n\n    const apiUrl = `https://pixabay.com/api/?key=21797660-d1d29527b0a34b4e6394998e6&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=20`;\n\n    loader.classList.remove('hidden');\n    if (page > 1) {\n      showMoreButton.style.display = 'none';\n      loaderShowMore.style.display = 'block';\n    }\n    try {\n      const response = await axios.get(apiUrl);\n      const data = response.data;\n\n      loader.classList.add('hidden');\n      loaderShowMore.style.display = 'none';\n\n      if (data.totalHits === 0 && page === 1) {\n        gallery.innerHTML = '';\n        showIziToast(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n        showMoreButton.style.display = 'none';\n        return;\n      }\n\n      totalHits = data.totalHits;\n\n      if (page === 1) {\n        gallery.innerHTML = '';\n      }\n\n      const imageElements = data.hits.map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          const li = document.createElement('li');\n          li.className = 'gallery-item';\n\n          const link = document.createElement('a');\n          link.className = 'gallery-link';\n          link.href = largeImageURL;\n\n          const img = document.createElement('img');\n          img.src = webformatURL;\n          img.alt = tags;\n          img.className = 'gallery-image';\n\n          link.appendChild(img);\n          li.appendChild(link);\n\n          const imageProperties = document.createElement('ul');\n          imageProperties.className = 'image-properties';\n\n          imageProperties.appendChild(\n            createImagePropertyElement('likes', 'Likes', likes)\n          );\n          imageProperties.appendChild(\n            createImagePropertyElement('views', 'Views', views)\n          );\n          imageProperties.appendChild(\n            createImagePropertyElement('comments', 'Comments', comments)\n          );\n          imageProperties.appendChild(\n            createImagePropertyElement('downloads', 'Downloads', downloads)\n          );\n\n          li.appendChild(imageProperties);\n          return li;\n        }\n      );\n\n      imageElements.forEach(element => gallery.appendChild(element));\n\n      if (page > 1) {\n        const firstGalleryItem = document.querySelector('.gallery-item');\n        if (firstGalleryItem) {\n          const { height: cardHeight } =\n            firstGalleryItem.getBoundingClientRect();\n          window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n          });\n        }\n      }\n\n      lightbox.refresh();\n\n      if (gallery.children.length >= totalHits) {\n        showMoreButton.style.display = 'none';\n        showIziToast(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      } else {\n        showMoreButton.style.display = 'block';\n      }\n    } catch (error) {\n      loader.classList.add('hidden');\n      console.error('Error fetching images:', error);\n      showIziToast(\n        'An error occurred while fetching images. Please try again.'\n      );\n    }\n  };\n\n  // Event Listeners\n  searchButton.addEventListener('click', event => {\n    event.preventDefault();\n    currentPage = 1;\n    fetchImages(currentPage);\n  });\n\n  showMoreButton.addEventListener('click', () => {\n    currentPage++;\n    fetchImages(currentPage);\n  });\n});\n"],"names":["currentPage","totalHits","searchInput","searchButton","gallery","loader","loaderShowMore","showMoreButton","lightbox","SimpleLightbox","e","showIziToast","message","iziToast","createImagePropertyElement","className","labelText","valueText","li","textSpan","valueSpan","fetchImages","page","query","apiUrl","data","axios","webformatURL","largeImageURL","tags","likes","views","comments","downloads","link","img","imageProperties","element","firstGalleryItem","cardHeight","error","event"],"mappings":"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"}